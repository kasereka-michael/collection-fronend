{"ast":null,"code":"import React from'react';import{Navigate}from'react-router-dom';import{useAuth}from'../contexts/AuthContext';import Layout from'./Layout';// Protected route with optional role-based access control\n// Usage: <ProtectedRoute roles={[\"ADMIN\"]}>...</ProtectedRoute>\nimport{jsx as _jsx}from\"react/jsx-runtime\";const ProtectedRoute=_ref=>{let{children,roles}=_ref;const{user,loading}=useAuth();if(loading){return/*#__PURE__*/_jsx(\"div\",{className:\"loading-spinner\",children:/*#__PURE__*/_jsx(\"div\",{className:\"spinner-border\",role:\"status\",children:/*#__PURE__*/_jsx(\"span\",{className:\"visually-hidden\",children:\"Loading...\"})})});}if(!user){return/*#__PURE__*/_jsx(Navigate,{to:\"/login\"});}if(roles&&roles.length>0&&!roles.includes(user.role)){// If user is authenticated but not authorized, redirect to dashboard\nreturn/*#__PURE__*/_jsx(Navigate,{to:\"/\"});}return/*#__PURE__*/_jsx(Layout,{children:children});};export default ProtectedRoute;","map":{"version":3,"names":["React","Navigate","useAuth","Layout","jsx","_jsx","ProtectedRoute","_ref","children","roles","user","loading","className","role","to","length","includes"],"sources":["/home/michael-jazziry/Desktop/retourneProject/frontend/src/components/ProtectedRoute.js"],"sourcesContent":["import React from 'react';\nimport { Navigate } from 'react-router-dom';\nimport { useAuth } from '../contexts/AuthContext';\nimport Layout from './Layout';\n\n// Protected route with optional role-based access control\n// Usage: <ProtectedRoute roles={[\"ADMIN\"]}>...</ProtectedRoute>\nconst ProtectedRoute = ({ children, roles }) => {\n  const { user, loading } = useAuth();\n\n  if (loading) {\n    return (\n      <div className=\"loading-spinner\">\n        <div className=\"spinner-border\" role=\"status\">\n          <span className=\"visually-hidden\">Loading...</span>\n        </div>\n      </div>\n    );\n  }\n\n  if (!user) {\n    return <Navigate to=\"/login\" />;\n  }\n\n  if (roles && roles.length > 0 && !roles.includes(user.role)) {\n    // If user is authenticated but not authorized, redirect to dashboard\n    return <Navigate to=\"/\" />;\n  }\n\n  return <Layout>{children}</Layout>;\n};\n\nexport default ProtectedRoute;"],"mappings":"AAAA,MAAO,CAAAA,KAAK,KAAM,OAAO,CACzB,OAASC,QAAQ,KAAQ,kBAAkB,CAC3C,OAASC,OAAO,KAAQ,yBAAyB,CACjD,MAAO,CAAAC,MAAM,KAAM,UAAU,CAE7B;AACA;AAAA,OAAAC,GAAA,IAAAC,IAAA,yBACA,KAAM,CAAAC,cAAc,CAAGC,IAAA,EAAyB,IAAxB,CAAEC,QAAQ,CAAEC,KAAM,CAAC,CAAAF,IAAA,CACzC,KAAM,CAAEG,IAAI,CAAEC,OAAQ,CAAC,CAAGT,OAAO,CAAC,CAAC,CAEnC,GAAIS,OAAO,CAAE,CACX,mBACEN,IAAA,QAAKO,SAAS,CAAC,iBAAiB,CAAAJ,QAAA,cAC9BH,IAAA,QAAKO,SAAS,CAAC,gBAAgB,CAACC,IAAI,CAAC,QAAQ,CAAAL,QAAA,cAC3CH,IAAA,SAAMO,SAAS,CAAC,iBAAiB,CAAAJ,QAAA,CAAC,YAAU,CAAM,CAAC,CAChD,CAAC,CACH,CAAC,CAEV,CAEA,GAAI,CAACE,IAAI,CAAE,CACT,mBAAOL,IAAA,CAACJ,QAAQ,EAACa,EAAE,CAAC,QAAQ,CAAE,CAAC,CACjC,CAEA,GAAIL,KAAK,EAAIA,KAAK,CAACM,MAAM,CAAG,CAAC,EAAI,CAACN,KAAK,CAACO,QAAQ,CAACN,IAAI,CAACG,IAAI,CAAC,CAAE,CAC3D;AACA,mBAAOR,IAAA,CAACJ,QAAQ,EAACa,EAAE,CAAC,GAAG,CAAE,CAAC,CAC5B,CAEA,mBAAOT,IAAA,CAACF,MAAM,EAAAK,QAAA,CAAEA,QAAQ,CAAS,CAAC,CACpC,CAAC,CAED,cAAe,CAAAF,cAAc","ignoreList":[]},"metadata":{},"sourceType":"module","externalDependencies":[]}