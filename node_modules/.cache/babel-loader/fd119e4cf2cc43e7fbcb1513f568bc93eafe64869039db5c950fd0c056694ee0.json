{"ast":null,"code":"import React,{useEffect,useState}from'react';import{useNavigate,useParams}from'react-router-dom';import{useAuth}from'../contexts/AuthContext';import{withdrawalService}from'../services/withdrawalService';import{jsx as _jsx,jsxs as _jsxs}from\"react/jsx-runtime\";const WithdrawalDetail=()=>{const{id}=useParams();const{user}=useAuth();const navigate=useNavigate();const[withdrawal,setWithdrawal]=useState(null);const[loading,setLoading]=useState(true);const[error,setError]=useState(null);useEffect(()=>{const fetchWithdrawal=async()=>{try{setLoading(true);const response=await withdrawalService.getWithdrawalRequestById(id);setWithdrawal(response.data);}catch(e){console.error('Failed to load withdrawal:',e);setError('Failed to load withdrawal details');}finally{setLoading(false);}};fetchWithdrawal();},[id]);if(loading){return/*#__PURE__*/_jsx(\"div\",{className:\"loading-spinner\",children:/*#__PURE__*/_jsx(\"div\",{className:\"spinner-border\",role:\"status\",children:/*#__PURE__*/_jsx(\"span\",{className:\"visually-hidden\",children:\"Loading...\"})})});}if(error){return/*#__PURE__*/_jsxs(\"div\",{className:\"container-fluid\",children:[/*#__PURE__*/_jsx(\"div\",{className:\"alert alert-danger mt-3\",children:error}),/*#__PURE__*/_jsxs(\"button\",{className:\"btn btn-secondary\",onClick:()=>navigate(-1),children:[/*#__PURE__*/_jsx(\"i\",{className:\"fas fa-arrow-left me-2\"}),\"Back\"]})]});}if(!withdrawal)return null;return/*#__PURE__*/_jsx(\"div\",{className:\"container-fluid\",children:/*#__PURE__*/_jsx(\"div\",{className:\"row\",children:/*#__PURE__*/_jsxs(\"div\",{className:\"col-12\",children:[/*#__PURE__*/_jsxs(\"div\",{className:\"d-flex justify-content-between align-items-center mb-3\",children:[/*#__PURE__*/_jsxs(\"h1\",{children:[\"Withdrawal #\",withdrawal.id]}),/*#__PURE__*/_jsx(\"div\",{className:\"d-flex gap-2\",children:/*#__PURE__*/_jsxs(\"button\",{className:\"btn btn-outline-secondary\",onClick:()=>navigate(-1),children:[/*#__PURE__*/_jsx(\"i\",{className:\"fas fa-arrow-left me-2\"}),\"Back\"]})})]}),/*#__PURE__*/_jsx(\"div\",{className:\"card\",children:/*#__PURE__*/_jsx(\"div\",{className:\"card-body\",children:/*#__PURE__*/_jsxs(\"div\",{className:\"row g-3\",children:[/*#__PURE__*/_jsxs(\"div\",{className:\"col-md-6\",children:[/*#__PURE__*/_jsx(\"strong\",{children:\"Cycle\"}),/*#__PURE__*/_jsx(\"div\",{children:withdrawal.cycleId})]}),/*#__PURE__*/_jsxs(\"div\",{className:\"col-md-6\",children:[/*#__PURE__*/_jsx(\"strong\",{children:\"Status\"}),/*#__PURE__*/_jsx(\"div\",{children:withdrawal.status})]}),/*#__PURE__*/_jsxs(\"div\",{className:\"col-md-6\",children:[/*#__PURE__*/_jsx(\"strong\",{children:\"Requested Amount\"}),/*#__PURE__*/_jsxs(\"div\",{children:[parseFloat(withdrawal.requestedAmount||0).toLocaleString(),\" UGX\"]})]}),/*#__PURE__*/_jsxs(\"div\",{className:\"col-md-6\",children:[/*#__PURE__*/_jsx(\"strong\",{children:\"Approved Amount\"}),/*#__PURE__*/_jsx(\"div\",{children:withdrawal.approvedAmount?\"\".concat(parseFloat(withdrawal.approvedAmount).toLocaleString(),\" UGX\"):'N/A'})]}),/*#__PURE__*/_jsxs(\"div\",{className:\"col-md-6\",children:[/*#__PURE__*/_jsx(\"strong\",{children:\"Request Date\"}),/*#__PURE__*/_jsx(\"div\",{children:withdrawal.requestDate?new Date(withdrawal.requestDate).toLocaleString():'—'})]}),withdrawal.approvalDate&&/*#__PURE__*/_jsxs(\"div\",{className:\"col-md-6\",children:[/*#__PURE__*/_jsx(\"strong\",{children:\"Approval Date\"}),/*#__PURE__*/_jsx(\"div\",{children:new Date(withdrawal.approvalDate).toLocaleString()})]}),/*#__PURE__*/_jsxs(\"div\",{className:\"col-12\",children:[/*#__PURE__*/_jsx(\"strong\",{children:\"Reason\"}),/*#__PURE__*/_jsx(\"div\",{children:withdrawal.reason||'—'})]}),withdrawal.approvalNotes&&/*#__PURE__*/_jsxs(\"div\",{className:\"col-12\",children:[/*#__PURE__*/_jsx(\"strong\",{children:\"Approval Notes\"}),/*#__PURE__*/_jsx(\"div\",{children:withdrawal.approvalNotes})]}),withdrawal.rejectionReason&&/*#__PURE__*/_jsxs(\"div\",{className:\"col-12\",children:[/*#__PURE__*/_jsx(\"strong\",{children:\"Rejection Reason\"}),/*#__PURE__*/_jsx(\"div\",{children:withdrawal.rejectionReason})]})]})})}),/*#__PURE__*/_jsxs(\"div\",{className:\"mt-3 d-flex gap-2\",children:[/*#__PURE__*/_jsxs(\"button\",{className:\"btn btn-outline-primary\",onClick:()=>navigate(\"/cycles/\".concat(withdrawal.cycleId)),children:[/*#__PURE__*/_jsx(\"i\",{className:\"fas fa-sync me-2\"}),\"View Cycle\"]}),/*#__PURE__*/_jsxs(\"button\",{className:\"btn btn-primary\",onClick:()=>navigate(\"/withdrawals/\".concat(withdrawal.id,\"/edit\")),children:[/*#__PURE__*/_jsx(\"i\",{className:\"fas fa-edit me-2\"}),\"Edit\"]})]})]})})});};export default WithdrawalDetail;","map":{"version":3,"names":["React","useEffect","useState","useNavigate","useParams","useAuth","withdrawalService","jsx","_jsx","jsxs","_jsxs","WithdrawalDetail","id","user","navigate","withdrawal","setWithdrawal","loading","setLoading","error","setError","fetchWithdrawal","response","getWithdrawalRequestById","data","e","console","className","children","role","onClick","cycleId","status","parseFloat","requestedAmount","toLocaleString","approvedAmount","concat","requestDate","Date","approvalDate","reason","approvalNotes","rejectionReason"],"sources":["/home/michael-jazziry/Desktop/retourneProject/frontend/src/components/WithdrawalDetail.js"],"sourcesContent":["import React, { useEffect, useState } from 'react';\nimport { useNavigate, useParams } from 'react-router-dom';\nimport { useAuth } from '../contexts/AuthContext';\nimport { withdrawalService } from '../services/withdrawalService';\n\nconst WithdrawalDetail = () => {\n  const { id } = useParams();\n  const { user } = useAuth();\n  const navigate = useNavigate();\n  const [withdrawal, setWithdrawal] = useState(null);\n  const [loading, setLoading] = useState(true);\n  const [error, setError] = useState(null);\n\n  useEffect(() => {\n    const fetchWithdrawal = async () => {\n      try {\n        setLoading(true);\n        const response = await withdrawalService.getWithdrawalRequestById(id);\n        setWithdrawal(response.data);\n      } catch (e) {\n        console.error('Failed to load withdrawal:', e);\n        setError('Failed to load withdrawal details');\n      } finally {\n        setLoading(false);\n      }\n    };\n\n    fetchWithdrawal();\n  }, [id]);\n\n\n    if (loading) {\n    return (\n      <div className=\"loading-spinner\">\n        <div className=\"spinner-border\" role=\"status\">\n          <span className=\"visually-hidden\">Loading...</span>\n        </div>\n      </div>\n    );\n  }\n\n  if (error) {\n    return (\n      <div className=\"container-fluid\">\n        <div className=\"alert alert-danger mt-3\">{error}</div>\n        <button className=\"btn btn-secondary\" onClick={() => navigate(-1)}>\n          <i className=\"fas fa-arrow-left me-2\"></i>\n          Back\n        </button>\n      </div>\n    );\n  }\n\n  if (!withdrawal) return null;\n\n  return (\n    <div className=\"container-fluid\">\n      <div className=\"row\">\n        <div className=\"col-12\">\n          <div className=\"d-flex justify-content-between align-items-center mb-3\">\n            <h1>Withdrawal #{withdrawal.id}</h1>\n            <div className=\"d-flex gap-2\">\n              <button className=\"btn btn-outline-secondary\" onClick={() => navigate(-1)}>\n                <i className=\"fas fa-arrow-left me-2\"></i>\n                Back\n              </button>\n            </div>\n          </div>\n\n          <div className=\"card\">\n            <div className=\"card-body\">\n              <div className=\"row g-3\">\n                <div className=\"col-md-6\">\n                  <strong>Cycle</strong>\n                  <div>{withdrawal.cycleId}</div>\n                </div>\n                <div className=\"col-md-6\">\n                  <strong>Status</strong>\n                  <div>{withdrawal.status}</div>\n                </div>\n                <div className=\"col-md-6\">\n                  <strong>Requested Amount</strong>\n                  <div>{parseFloat(withdrawal.requestedAmount || 0).toLocaleString()} UGX</div>\n                </div>\n                <div className=\"col-md-6\">\n                  <strong>Approved Amount</strong>\n                  <div>{withdrawal.approvedAmount ? `${parseFloat(withdrawal.approvedAmount).toLocaleString()} UGX` : 'N/A'}</div>\n                </div>\n                <div className=\"col-md-6\">\n                  <strong>Request Date</strong>\n                  <div>{withdrawal.requestDate ? new Date(withdrawal.requestDate).toLocaleString() : '—'}</div>\n                </div>\n                {withdrawal.approvalDate && (\n                  <div className=\"col-md-6\">\n                    <strong>Approval Date</strong>\n                    <div>{new Date(withdrawal.approvalDate).toLocaleString()}</div>\n                  </div>\n                )}\n                <div className=\"col-12\">\n                  <strong>Reason</strong>\n                  <div>{withdrawal.reason || '—'}</div>\n                </div>\n                {withdrawal.approvalNotes && (\n                  <div className=\"col-12\">\n                    <strong>Approval Notes</strong>\n                    <div>{withdrawal.approvalNotes}</div>\n                  </div>\n                )}\n                {withdrawal.rejectionReason && (\n                  <div className=\"col-12\">\n                    <strong>Rejection Reason</strong>\n                    <div>{withdrawal.rejectionReason}</div>\n                  </div>\n                )}\n              </div>\n            </div>\n          </div>\n\n          <div className=\"mt-3 d-flex gap-2\">\n            <button className=\"btn btn-outline-primary\" onClick={() => navigate(`/cycles/${withdrawal.cycleId}`)}>\n              <i className=\"fas fa-sync me-2\"></i>\n              View Cycle\n            </button>\n              {/*{(user?.role === 'COLLECTOR' || user?.role === 'ADMIN' || user?.role === 'ACCOUNTANT') &&*/}\n              {/*    !withdrawal.isApproved && (*/}\n                      <button\n                          className=\"btn btn-primary\"\n                          onClick={() => navigate(`/withdrawals/${withdrawal.id}/edit`)}\n                      >\n                          <i className=\"fas fa-edit me-2\"></i>\n                          Edit\n                      </button>\n                  {/*)}*/}\n          </div>\n        </div>\n      </div>\n    </div>\n  );\n};\n\nexport default WithdrawalDetail;\n"],"mappings":"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","ignoreList":[]},"metadata":{},"sourceType":"module","externalDependencies":[]}