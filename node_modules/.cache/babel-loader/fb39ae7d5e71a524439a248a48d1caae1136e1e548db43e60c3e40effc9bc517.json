{"ast":null,"code":"import _objectSpread from\"/home/michael-jazziry/Desktop/retourneProject/frontend/node_modules/@babel/runtime/helpers/esm/objectSpread2.js\";import React,{useState,useEffect}from'react';import{useNavigate,useParams}from'react-router-dom';import{clientService}from'../services/clientService';import{useAuth}from'../contexts/AuthContext';import{jsx as _jsx,jsxs as _jsxs,Fragment as _Fragment}from\"react/jsx-runtime\";const ClientForm=()=>{const navigate=useNavigate();const{id}=useParams();const isEdit=Boolean(id);const{user}=useAuth();const[formData,setFormData]=useState({firstName:'',lastName:'',phoneNumber:'',address:'',nationalId:'',occupation:'',emergencyContactName:'',emergencyContactPhone:'',personalCode:'',registrationFeePaid:false,collector:''// This will be set to the current user's id\n});const[loading,setLoading]=useState(false);const[errors,setErrors]=useState({});useEffect(()=>{// Redirect ADMIN users away from client form\nif(user&&user.role==='ADMIN'){alert('Access denied: Admins cannot create or edit clients.');navigate('/clients');return;}// Set collector to current user id if not editing\nif(user&&!isEdit){setFormData(prev=>_objectSpread(_objectSpread({},prev),{},{collector:user.id}));}if(isEdit){fetchClient();}},[id,isEdit,user,navigate]);const fetchClient=async()=>{try{var _response$data$collec;setLoading(true);const response=await clientService.getClientById(id);// If collector is an object, use its id\nsetFormData(_objectSpread(_objectSpread({},response.data),{},{collector:((_response$data$collec=response.data.collector)===null||_response$data$collec===void 0?void 0:_response$data$collec.id)||''}));}catch(error){console.error('Error fetching client:',error);alert('Error loading client data');}finally{setLoading(false);}};const handleChange=e=>{const{name,value,type,checked}=e.target;setFormData(prev=>_objectSpread(_objectSpread({},prev),{},{[name]:type==='checkbox'?checked:value}));if(errors[name]){setErrors(prev=>_objectSpread(_objectSpread({},prev),{},{[name]:''}));}};const validateForm=()=>{const newErrors={};if(!formData.firstName.trim()){newErrors.firstName='First name is required';}if(!formData.lastName.trim()){newErrors.lastName='Last name is required';}if(!formData.phoneNumber.trim()){newErrors.phoneNumber='Phone number is required';}if(!formData.address.trim()){newErrors.address='Address is required';}if(!formData.personalCode.trim()){newErrors.personalCode='Personal code is required';}if(!formData.collector){newErrors.collector='Collector (user ID) is required';}setErrors(newErrors);return Object.keys(newErrors).length===0;};const handleSubmit=async e=>{e.preventDefault();if(!validateForm()){return;}try{setLoading(true);// Prepare data for backend (collector as object with id)\nconst submitData=_objectSpread(_objectSpread({},formData),{},{collector:{id:user.id},// always use current user id\npersonalCode:formData.personalCode.trim()});if(isEdit){await clientService.updateClient(id,submitData);alert('Client updated successfully!');}else{await clientService.createClient(submitData);alert('Client created successfully!');}navigate('/clients');}catch(error){var _error$response,_error$response$data;console.error('Error saving client:',error);alert(\"Error \".concat(isEdit?'updating':'creating',\" client: \").concat(((_error$response=error.response)===null||_error$response===void 0?void 0:(_error$response$data=_error$response.data)===null||_error$response$data===void 0?void 0:_error$response$data.message)||error.message));}finally{setLoading(false);}};if(loading&&isEdit){return/*#__PURE__*/_jsx(\"div\",{className:\"container-fluid\",children:/*#__PURE__*/_jsx(\"div\",{className:\"text-center mt-5\",children:/*#__PURE__*/_jsx(\"div\",{className:\"spinner-border\",role:\"status\",children:/*#__PURE__*/_jsx(\"span\",{className:\"visually-hidden\",children:\"Loading...\"})})})});}// Prevent rendering form until user context is loaded and collector is set\nif(!user||!formData.collector){return/*#__PURE__*/_jsx(\"div\",{className:\"container-fluid\",children:/*#__PURE__*/_jsx(\"div\",{className:\"text-center mt-5\",children:/*#__PURE__*/_jsx(\"div\",{className:\"spinner-border\",role:\"status\",children:/*#__PURE__*/_jsx(\"span\",{className:\"visually-hidden\",children:\"Loading user context...\"})})})});}return/*#__PURE__*/_jsx(\"div\",{className:\"container-fluid\",children:/*#__PURE__*/_jsx(\"div\",{className:\"row\",children:/*#__PURE__*/_jsxs(\"div\",{className:\"col-12\",children:[/*#__PURE__*/_jsxs(\"div\",{className:\"d-flex justify-content-between align-items-center mb-4\",children:[/*#__PURE__*/_jsx(\"h1\",{children:isEdit?'Edit Client':'Add New Client'}),/*#__PURE__*/_jsxs(\"button\",{className:\"btn btn-secondary\",onClick:()=>navigate('/clients'),children:[/*#__PURE__*/_jsx(\"i\",{className:\"fas fa-arrow-left me-2\"}),\"Back to Clients\"]})]}),/*#__PURE__*/_jsxs(\"div\",{className:\"card\",children:[/*#__PURE__*/_jsx(\"div\",{className:\"card-header\",children:/*#__PURE__*/_jsx(\"h5\",{children:isEdit?'Update Client Information':'Client Information'})}),/*#__PURE__*/_jsx(\"div\",{className:\"card-body\",children:/*#__PURE__*/_jsxs(\"form\",{onSubmit:handleSubmit,children:[/*#__PURE__*/_jsxs(\"div\",{className:\"row\",children:[/*#__PURE__*/_jsxs(\"div\",{className:\"col-md-6 mb-3\",children:[/*#__PURE__*/_jsx(\"label\",{htmlFor:\"firstName\",className:\"form-label\",children:\"First Name *\"}),/*#__PURE__*/_jsx(\"input\",{type:\"text\",className:\"form-control \".concat(errors.firstName?'is-invalid':''),id:\"firstName\",name:\"firstName\",value:formData.firstName,onChange:handleChange,disabled:loading}),errors.firstName&&/*#__PURE__*/_jsx(\"div\",{className:\"invalid-feedback\",children:errors.firstName})]}),/*#__PURE__*/_jsxs(\"div\",{className:\"col-md-6 mb-3\",children:[/*#__PURE__*/_jsx(\"label\",{htmlFor:\"lastName\",className:\"form-label\",children:\"Last Name *\"}),/*#__PURE__*/_jsx(\"input\",{type:\"text\",className:\"form-control \".concat(errors.lastName?'is-invalid':''),id:\"lastName\",name:\"lastName\",value:formData.lastName,onChange:handleChange,disabled:loading}),errors.lastName&&/*#__PURE__*/_jsx(\"div\",{className:\"invalid-feedback\",children:errors.lastName})]}),/*#__PURE__*/_jsxs(\"div\",{className:\"col-md-6 mb-3\",children:[/*#__PURE__*/_jsx(\"label\",{htmlFor:\"phoneNumber\",className:\"form-label\",children:\"Phone Number *\"}),/*#__PURE__*/_jsx(\"input\",{type:\"tel\",className:\"form-control \".concat(errors.phoneNumber?'is-invalid':''),id:\"phoneNumber\",name:\"phoneNumber\",value:formData.phoneNumber,onChange:handleChange,disabled:loading}),errors.phoneNumber&&/*#__PURE__*/_jsx(\"div\",{className:\"invalid-feedback\",children:errors.phoneNumber})]}),/*#__PURE__*/_jsxs(\"div\",{className:\"col-md-6 mb-3\",children:[/*#__PURE__*/_jsx(\"label\",{htmlFor:\"address\",className:\"form-label\",children:\"Address *\"}),/*#__PURE__*/_jsx(\"input\",{type:\"text\",className:\"form-control \".concat(errors.address?'is-invalid':''),id:\"address\",name:\"address\",value:formData.address,onChange:handleChange,disabled:loading}),errors.address&&/*#__PURE__*/_jsx(\"div\",{className:\"invalid-feedback\",children:errors.address})]}),/*#__PURE__*/_jsxs(\"div\",{className:\"col-md-6 mb-3\",children:[/*#__PURE__*/_jsx(\"label\",{htmlFor:\"personalCode\",className:\"form-label\",children:\"Personal Code *\"}),/*#__PURE__*/_jsx(\"input\",{type:\"text\",className:\"form-control \".concat(errors.personalCode?'is-invalid':''),id:\"personalCode\",name:\"personalCode\",value:formData.personalCode,onChange:handleChange,disabled:loading}),errors.personalCode&&/*#__PURE__*/_jsx(\"div\",{className:\"invalid-feedback\",children:errors.personalCode})]}),/*#__PURE__*/_jsxs(\"div\",{className:\"col-md-6 mb-3\",children:[/*#__PURE__*/_jsx(\"label\",{htmlFor:\"nationalId\",className:\"form-label\",children:\"National ID\"}),/*#__PURE__*/_jsx(\"input\",{type:\"text\",className:\"form-control\",id:\"nationalId\",name:\"nationalId\",value:formData.nationalId,onChange:handleChange,disabled:loading})]}),/*#__PURE__*/_jsxs(\"div\",{className:\"col-md-6 mb-3\",children:[/*#__PURE__*/_jsx(\"label\",{htmlFor:\"occupation\",className:\"form-label\",children:\"Occupation\"}),/*#__PURE__*/_jsx(\"input\",{type:\"text\",className:\"form-control\",id:\"occupation\",name:\"occupation\",value:formData.occupation,onChange:handleChange,disabled:loading})]}),/*#__PURE__*/_jsxs(\"div\",{className:\"col-md-6 mb-3\",children:[/*#__PURE__*/_jsx(\"label\",{htmlFor:\"emergencyContactName\",className:\"form-label\",children:\"Emergency Contact Name\"}),/*#__PURE__*/_jsx(\"input\",{type:\"text\",className:\"form-control\",id:\"emergencyContactName\",name:\"emergencyContactName\",value:formData.emergencyContactName,onChange:handleChange,disabled:loading})]}),/*#__PURE__*/_jsxs(\"div\",{className:\"col-md-6 mb-3\",children:[/*#__PURE__*/_jsx(\"label\",{htmlFor:\"emergencyContactPhone\",className:\"form-label\",children:\"Emergency Contact Phone\"}),/*#__PURE__*/_jsx(\"input\",{type:\"tel\",className:\"form-control\",id:\"emergencyContactPhone\",name:\"emergencyContactPhone\",value:formData.emergencyContactPhone,onChange:handleChange,disabled:loading})]}),/*#__PURE__*/_jsx(\"div\",{className:\"col-md-6 mb-3\",children:/*#__PURE__*/_jsxs(\"div\",{className:\"form-check mt-4\",children:[/*#__PURE__*/_jsx(\"input\",{className:\"form-check-input\",type:\"checkbox\",id:\"registrationFeePaid\",name:\"registrationFeePaid\",checked:formData.registrationFeePaid,onChange:handleChange,disabled:loading}),/*#__PURE__*/_jsx(\"label\",{className:\"form-check-label\",htmlFor:\"registrationFeePaid\",children:\"Registration Fee Paid\"})]})})]}),/*#__PURE__*/_jsxs(\"div\",{className:\"d-flex justify-content-end gap-2\",children:[/*#__PURE__*/_jsx(\"button\",{type:\"button\",className:\"btn btn-secondary\",onClick:()=>navigate('/clients'),disabled:loading,children:\"Cancel\"}),/*#__PURE__*/_jsx(\"button\",{type:\"submit\",className:\"btn btn-primary\",disabled:loading,children:loading?/*#__PURE__*/_jsxs(_Fragment,{children:[/*#__PURE__*/_jsx(\"span\",{className:\"spinner-border spinner-border-sm me-2\",role:\"status\",\"aria-hidden\":\"true\"}),isEdit?'Updating...':'Creating...']}):/*#__PURE__*/_jsxs(_Fragment,{children:[/*#__PURE__*/_jsx(\"i\",{className:\"fas \".concat(isEdit?'fa-save':'fa-plus',\" me-2\")}),isEdit?'Update Client':'Create Client']})})]})]})})]})]})})});};export default ClientForm;","map":{"version":3,"names":["React","useState","useEffect","useNavigate","useParams","clientService","useAuth","jsx","_jsx","jsxs","_jsxs","Fragment","_Fragment","ClientForm","navigate","id","isEdit","Boolean","user","formData","setFormData","firstName","lastName","phoneNumber","address","nationalId","occupation","emergencyContactName","emergencyContactPhone","personalCode","registrationFeePaid","collector","loading","setLoading","errors","setErrors","role","alert","prev","_objectSpread","fetchClient","_response$data$collec","response","getClientById","data","error","console","handleChange","e","name","value","type","checked","target","validateForm","newErrors","trim","Object","keys","length","handleSubmit","preventDefault","submitData","updateClient","createClient","_error$response","_error$response$data","concat","message","className","children","onClick","onSubmit","htmlFor","onChange","disabled"],"sources":["/home/michael-jazziry/Desktop/retourneProject/frontend/src/components/ClientForm.js"],"sourcesContent":["import React, { useState, useEffect } from 'react';\nimport { useNavigate, useParams } from 'react-router-dom';\nimport { clientService } from '../services/clientService';\nimport { useAuth } from '../contexts/AuthContext';\n\nconst ClientForm = () => {\n  const navigate = useNavigate();\n  const { id } = useParams();\n  const isEdit = Boolean(id);\n  const { user } = useAuth();\n\n  const [formData, setFormData] = useState({\n    firstName: '',\n    lastName: '',\n    phoneNumber: '',\n    address: '',\n    nationalId: '',\n    occupation: '',\n    emergencyContactName: '',\n    emergencyContactPhone: '',\n    personalCode: '',\n    registrationFeePaid: false,\n    collector: '' // This will be set to the current user's id\n  });\n\n  const [loading, setLoading] = useState(false);\n  const [errors, setErrors] = useState({});\n\n  useEffect(() => {\n    // Redirect ADMIN users away from client form\n    if (user && user.role === 'ADMIN') {\n      alert('Access denied: Admins cannot create or edit clients.');\n      navigate('/clients');\n      return;\n    }\n\n    // Set collector to current user id if not editing\n    if (user && !isEdit) {\n      setFormData(prev => ({ ...prev, collector: user.id }));\n    }\n    if (isEdit) {\n      fetchClient();\n    }\n  }, [id, isEdit, user, navigate]);\n\n  const fetchClient = async () => {\n    try {\n      setLoading(true);\n      const response = await clientService.getClientById(id);\n      // If collector is an object, use its id\n      setFormData({\n        ...response.data,\n        collector: response.data.collector?.id || ''\n      });\n    } catch (error) {\n      console.error('Error fetching client:', error);\n      alert('Error loading client data');\n    } finally {\n      setLoading(false);\n    }\n  };\n\n  const handleChange = (e) => {\n    const { name, value, type, checked } = e.target;\n    setFormData(prev => ({\n      ...prev,\n      [name]: type === 'checkbox' ? checked : value\n    }));\n    if (errors[name]) {\n      setErrors(prev => ({\n        ...prev,\n        [name]: ''\n      }));\n    }\n  };\n\n  const validateForm = () => {\n    const newErrors = {};\n    if (!formData.firstName.trim()) {\n      newErrors.firstName = 'First name is required';\n    }\n    if (!formData.lastName.trim()) {\n      newErrors.lastName = 'Last name is required';\n    }\n    if (!formData.phoneNumber.trim()) {\n      newErrors.phoneNumber = 'Phone number is required';\n    }\n    if (!formData.address.trim()) {\n      newErrors.address = 'Address is required';\n    }\n    if (!formData.personalCode.trim()) {\n      newErrors.personalCode = 'Personal code is required';\n    }\n    if (!formData.collector) {\n      newErrors.collector = 'Collector (user ID) is required';\n    }\n    setErrors(newErrors);\n    return Object.keys(newErrors).length === 0;\n  };\n\n  const handleSubmit = async (e) => {\n    e.preventDefault();\n    if (!validateForm()) {\n      return;\n    }\n    try {\n      setLoading(true);\n      // Prepare data for backend (collector as object with id)\n      const submitData = {\n        ...formData,\n        collector: { id: user.id }, // always use current user id\n        personalCode: formData.personalCode.trim(),\n      };\n      if (isEdit) {\n        await clientService.updateClient(id, submitData);\n        alert('Client updated successfully!');\n      } else {\n        await clientService.createClient(submitData);\n        alert('Client created successfully!');\n      }\n      navigate('/clients');\n    } catch (error) {\n      console.error('Error saving client:', error);\n      alert(`Error ${isEdit ? 'updating' : 'creating'} client: ${error.response?.data?.message || error.message}`);\n    } finally {\n      setLoading(false);\n    }\n  };\n\n  if (loading && isEdit) {\n    return (\n      <div className=\"container-fluid\">\n        <div className=\"text-center mt-5\">\n          <div className=\"spinner-border\" role=\"status\">\n            <span className=\"visually-hidden\">Loading...</span>\n          </div>\n        </div>\n      </div>\n    );\n  }\n\n  // Prevent rendering form until user context is loaded and collector is set\n  if (!user || !formData.collector) {\n    return (\n      <div className=\"container-fluid\">\n        <div className=\"text-center mt-5\">\n          <div className=\"spinner-border\" role=\"status\">\n            <span className=\"visually-hidden\">Loading user context...</span>\n          </div>\n        </div>\n      </div>\n    );\n  }\n\n  return (\n    <div className=\"container-fluid\">\n      <div className=\"row\">\n        <div className=\"col-12\">\n          <div className=\"d-flex justify-content-between align-items-center mb-4\">\n            <h1>{isEdit ? 'Edit Client' : 'Add New Client'}</h1>\n            <button \n              className=\"btn btn-secondary\"\n              onClick={() => navigate('/clients')}\n            >\n              <i className=\"fas fa-arrow-left me-2\"></i>\n              Back to Clients\n            </button>\n          </div>\n\n          <div className=\"card\">\n            <div className=\"card-header\">\n              <h5>{isEdit ? 'Update Client Information' : 'Client Information'}</h5>\n            </div>\n            <div className=\"card-body\">\n              <form onSubmit={handleSubmit}>\n                <div className=\"row\">\n                  <div className=\"col-md-6 mb-3\">\n                    <label htmlFor=\"firstName\" className=\"form-label\">First Name *</label>\n                    <input\n                      type=\"text\"\n                      className={`form-control ${errors.firstName ? 'is-invalid' : ''}`}\n                      id=\"firstName\"\n                      name=\"firstName\"\n                      value={formData.firstName}\n                      onChange={handleChange}\n                      disabled={loading}\n                    />\n                    {errors.firstName && <div className=\"invalid-feedback\">{errors.firstName}</div>}\n                  </div>\n                  <div className=\"col-md-6 mb-3\">\n                    <label htmlFor=\"lastName\" className=\"form-label\">Last Name *</label>\n                    <input\n                      type=\"text\"\n                      className={`form-control ${errors.lastName ? 'is-invalid' : ''}`}\n                      id=\"lastName\"\n                      name=\"lastName\"\n                      value={formData.lastName}\n                      onChange={handleChange}\n                      disabled={loading}\n                    />\n                    {errors.lastName && <div className=\"invalid-feedback\">{errors.lastName}</div>}\n                  </div>\n                  <div className=\"col-md-6 mb-3\">\n                    <label htmlFor=\"phoneNumber\" className=\"form-label\">Phone Number *</label>\n                    <input\n                      type=\"tel\"\n                      className={`form-control ${errors.phoneNumber ? 'is-invalid' : ''}`}\n                      id=\"phoneNumber\"\n                      name=\"phoneNumber\"\n                      value={formData.phoneNumber}\n                      onChange={handleChange}\n                      disabled={loading}\n                    />\n                    {errors.phoneNumber && <div className=\"invalid-feedback\">{errors.phoneNumber}</div>}\n                  </div>\n                  <div className=\"col-md-6 mb-3\">\n                    <label htmlFor=\"address\" className=\"form-label\">Address *</label>\n                    <input\n                      type=\"text\"\n                      className={`form-control ${errors.address ? 'is-invalid' : ''}`}\n                      id=\"address\"\n                      name=\"address\"\n                      value={formData.address}\n                      onChange={handleChange}\n                      disabled={loading}\n                    />\n                    {errors.address && <div className=\"invalid-feedback\">{errors.address}</div>}\n                  </div>\n                  <div className=\"col-md-6 mb-3\">\n                    <label htmlFor=\"personalCode\" className=\"form-label\">Personal Code *</label>\n                    <input\n                      type=\"text\"\n                      className={`form-control ${errors.personalCode ? 'is-invalid' : ''}`}\n                      id=\"personalCode\"\n                      name=\"personalCode\"\n                      value={formData.personalCode}\n                      onChange={handleChange}\n                      disabled={loading}\n                    />\n                    {errors.personalCode && <div className=\"invalid-feedback\">{errors.personalCode}</div>}\n                  </div>\n                  {/* Collector field is set automatically and not shown in the form */}\n                  <div className=\"col-md-6 mb-3\">\n                    <label htmlFor=\"nationalId\" className=\"form-label\">National ID</label>\n                    <input\n                      type=\"text\"\n                      className=\"form-control\"\n                      id=\"nationalId\"\n                      name=\"nationalId\"\n                      value={formData.nationalId}\n                      onChange={handleChange}\n                      disabled={loading}\n                    />\n                  </div>\n                  <div className=\"col-md-6 mb-3\">\n                    <label htmlFor=\"occupation\" className=\"form-label\">Occupation</label>\n                    <input\n                      type=\"text\"\n                      className=\"form-control\"\n                      id=\"occupation\"\n                      name=\"occupation\"\n                      value={formData.occupation}\n                      onChange={handleChange}\n                      disabled={loading}\n                    />\n                  </div>\n                  <div className=\"col-md-6 mb-3\">\n                    <label htmlFor=\"emergencyContactName\" className=\"form-label\">Emergency Contact Name</label>\n                    <input\n                      type=\"text\"\n                      className=\"form-control\"\n                      id=\"emergencyContactName\"\n                      name=\"emergencyContactName\"\n                      value={formData.emergencyContactName}\n                      onChange={handleChange}\n                      disabled={loading}\n                    />\n                  </div>\n                  <div className=\"col-md-6 mb-3\">\n                    <label htmlFor=\"emergencyContactPhone\" className=\"form-label\">Emergency Contact Phone</label>\n                    <input\n                      type=\"tel\"\n                      className=\"form-control\"\n                      id=\"emergencyContactPhone\"\n                      name=\"emergencyContactPhone\"\n                      value={formData.emergencyContactPhone}\n                      onChange={handleChange}\n                      disabled={loading}\n                    />\n                  </div>\n                  <div className=\"col-md-6 mb-3\">\n                    <div className=\"form-check mt-4\">\n                      <input\n                        className=\"form-check-input\"\n                        type=\"checkbox\"\n                        id=\"registrationFeePaid\"\n                        name=\"registrationFeePaid\"\n                        checked={formData.registrationFeePaid}\n                        onChange={handleChange}\n                        disabled={loading}\n                      />\n                      <label className=\"form-check-label\" htmlFor=\"registrationFeePaid\">\n                        Registration Fee Paid\n                      </label>\n                    </div>\n                  </div>\n                </div>\n                <div className=\"d-flex justify-content-end gap-2\">\n                  <button\n                    type=\"button\"\n                    className=\"btn btn-secondary\"\n                    onClick={() => navigate('/clients')}\n                    disabled={loading}\n                  >\n                    Cancel\n                  </button>\n                  <button\n                    type=\"submit\"\n                    className=\"btn btn-primary\"\n                    disabled={loading}\n                  >\n                    {loading ? (\n                      <>\n                        <span className=\"spinner-border spinner-border-sm me-2\" role=\"status\" aria-hidden=\"true\"></span>\n                        {isEdit ? 'Updating...' : 'Creating...'}\n                      </>\n                    ) : (\n                      <>\n                        <i className={`fas ${isEdit ? 'fa-save' : 'fa-plus'} me-2`}></i>\n                        {isEdit ? 'Update Client' : 'Create Client'}\n                      </>\n                    )}\n                  </button>\n                </div>\n              </form>\n            </div>\n          </div>\n        </div>\n      </div>\n    </div>\n  );\n};\n\nexport default ClientForm;\n"],"mappings":"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","ignoreList":[]},"metadata":{},"sourceType":"module","externalDependencies":[]}